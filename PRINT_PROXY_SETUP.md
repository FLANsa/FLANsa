# ุฅุนุฏุงุฏ Print Proxy Server ุงููุฑูุฒู

## ุงููุดููุฉ
ุงููุชุตูุญุงุช ูุง ุชุณุชุทูุน ุงูุงุชุตุงู ูุจุงุดุฑุฉ ุจู TCP sockets ููุทุงุจุนุงุช ุงูุญุฑุงุฑูุฉ. ูุฐูู ูุญุชุงุฌ ุฅูู ุฎุงุฏู ุจุฑููุณู.

**ูุดููุฉ ุฅุถุงููุฉ**: iPad ุนูู HTTPS ูุง ูุณุชุทูุน ุงูุงุชุตุงู ุจู HTTP proxy ุจุณุจุจ Mixed Content policy.

**ูุดููุฉ ูุชุนุฏุฏุฉ ุงูุฃุฌูุฒุฉ**: ูู ุฌูุงุฒ ูุญุชุงุฌ Print Proxy Server ุนูู ุฌูุงุฒู ุงูุฎุงุตุ ููุง ูุฌุนู ุงูุทุจุงุนุฉ ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ ุตุนุจุฉ.

## ุงูุญู
ูู ุจุชุดุบูู Print Proxy Server **ูุฑูุฒู** ุนูู ุฌูุงุฒ ูุงุญุฏ ุนูู ุงูุดุจูุฉ (ูุซู Raspberry Pi ุฃู ููุจููุชุฑ ุฏุงุฆู). ูููู ูุฃู ุฌูุงุฒ ุขุฎุฑ ุนูู ููุณ ุงูุดุจูุฉ ุงูุงุชุตุงู ุจู ุชููุงุฆูุงู.

**ููุทุจุงุนุฉ ูู HTTPS (iPad)**: ุงุณุชุฎุฏู HTTPS/WSS (Ports 3443/3444) - ูุชุทูุจ ุดูุงุฏุฉ SSL.

**ููุทุจุงุนุฉ ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ**: ุงุญูุธ IP address Print Proxy Server ุงููุฑูุฒู ูู ุงูุฅุนุฏุงุฏุงุช (Settings) ููุชู ุงุณุชุฎุฏุงูู ูู ุฌููุน ุงูุฃุฌูุฒุฉ ุชููุงุฆูุงู.

## ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅูุดุงุก ุดูุงุฏุฉ SSL (ููุทุจุงุนุฉ ูู HTTPS)

ููุทุจุงุนุฉ ูู iPad ุนูู HTTPSุ ูุญุชุงุฌ ุฅูู ุดูุงุฏุฉ SSL. ููููู ุฅูุดุงุก ุดูุงุฏุฉ ุฐุงุชูุฉ ุงูุชูููุน:

```bash
mkdir -p certs
openssl req -x509 -newkey rsa:2048 -keyout certs/key.pem -out certs/cert.pem -days 365 -nodes -subj "/CN=localhost"
```

**ููุงุญุธุฉ**: ุงูุดูุงุฏุฉ ุงูุฐุงุชูุฉ ุงูุชูููุน ุณุชุธูุฑ ุชุญุฐูุฑ ุฃููู ูู ุงููุชุตูุญ. ููููู ูุจูููุง ุจุงูููุฑ ุนูู "Advanced" โ "Proceed to [IP] (unsafe)".

### 2. ุชุดุบูู Print Proxy Server

```bash
npm run print-proxy
```

ุฃู ูุจุงุดุฑุฉ:
```bash
node print-proxy-server.js
```

**ุงูููุงูุฐ ุงููุณุชุฎุฏูุฉ**:
- HTTP: `3001` (ูู localhost)
- WebSocket (WS): `3002` (ูู localhost)
- HTTPS: `3443` (ููุทุจุงุนุฉ ูู HTTPS - ูุชุทูุจ ุดูุงุฏุฉ SSL)
- WebSocket Secure (WSS): `3444` (ููุทุจุงุนุฉ ูู HTTPS - ูุชุทูุจ ุดูุงุฏุฉ SSL)

### 2. ูุนุฑูุฉ IP address ุงูููุจููุชุฑ

#### ุนูู Mac:
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

#### ุนูู Windows:
```bash
ipconfig
```

ุงุจุญุซ ุนู IP address ูู ุงูุดุจูุฉ ุงููุญููุฉ (ูุซุงู: `192.168.8.100`)

### 3. ุฅุนุฏุงุฏ Print Proxy Server ุงููุฑูุฒู ูู ุงูุฅุนุฏุงุฏุงุช

**ุงูุทุฑููุฉ ุงูููุตู ุจูุง**: ุงุญูุธ IP address Print Proxy Server ุงููุฑูุฒู ูู ุงูุฅุนุฏุงุฏุงุช:

1. ุงูุชุญ ุงูุชุทุจูู
2. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช (Settings)**
3. ุงุจุญุซ ุนู ุญูู **"IP address ุฎุงุฏู Print Proxy ุงููุฑูุฒู"**
4. ุฃุฏุฎู IP address ุงูููุจููุชุฑ ุงูุฐู ูุดุบู Print Proxy Server (ูุซุงู: `192.168.8.5`)
5. ุงุถุบุท **"ุญูุธ ุงูุฅุนุฏุงุฏุงุช"**

**ุงูููุงุฆุฏ**:
- โ ุฌููุน ุงูุฃุฌูุฒุฉ ุณุชุณุชุฎุฏู ููุณ Print Proxy Server ุชููุงุฆูุงู
- โ ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู IP address ูู ูู ุฌูุงุฒ
- โ ูููู ุชุบููุฑ IP address ูู ููุงู ูุงุญุฏ (ุงูุฅุนุฏุงุฏุงุช)

**ุงูุทุฑููุฉ ุงูุจุฏููุฉ**: ููููู ุฅุฏุฎุงู IP address ูุฏููุงู ูู ุตูุญุฉ ุงูุทุจุงุนุฉ (ููู ุณูุชู ุงุณุชุฎุฏุงูู ูุญููุงู ููุท ุนูู ูุฐุง ุงูุฌูุงุฒ)

**ููุงุญุธุฉ**: ุงููุธุงู ุณูุญุงูู ุงูุงุชุตุงู ุจู Print Proxy Server ุชููุงุฆูุงู ุนูู ุงูููุงูุฐ 3001, 8080, 5000 (HTTP) ู 3443, 3444 (HTTPS/WSS)

### 4. ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

#### ุงูุทุฑููุฉ ุงูููุตู ุจูุง (Print Proxy Server ุงููุฑูุฒู):

1. **ุดุบูู Print Proxy Server ุนูู ุฌูุงุฒ ูุฑูุฒู** (ูุซู Raspberry Pi ุฃู ููุจููุชุฑ ุฏุงุฆู):
   ```bash
   npm run print-proxy
   ```

2. **ุงุญูุธ IP address ูู ุงูุฅุนุฏุงุฏุงุช**:
   - ุงูุชุญ ุงูุชุทุจูู ุนูู ุฃู ุฌูุงุฒ
   - ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช (Settings)**
   - ุฃุฏุฎู IP address Print Proxy Server ุงููุฑูุฒู (ูุซุงู: `192.168.8.5`)
   - ุงุถุบุท **"ุญูุธ ุงูุฅุนุฏุงุฏุงุช"**

3. **ุงุณุชุฎุฏู ูู ุฃู ุฌูุงุฒ**:
   - ุงูุชุญ ุงูุชุทุจูู ุนูู ุฃู ุฌูุงุฒ ุขุฎุฑ (iPadุ ุฌูุงุฒ ุขุฎุฑุ ุฅูุฎ)
   - ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุทุจุงุนุฉ
   - ุฃุฏุฎู IP address ุงูุทุงุจุนุฉ ููุท (ูุซุงู: `192.168.8.190`)
   - ุงููุธุงู ุณูุณุชุฎุฏู Print Proxy Server ุงููุฑูุฒู ุชููุงุฆูุงู ูู ุงูุฅุนุฏุงุฏุงุช

#### ุงูุทุฑููุฉ ุงูุจุฏููุฉ (ุฅุฏุฎุงู ูุฏูู):

1. ุดุบูู Print Proxy Server ุนูู ุงูููุจููุชุฑ:
   ```bash
   npm run print-proxy
   ```

2. ุงูุชุญ ุงูุชุทุจูู ุนูู iPad

3. ูู ุตูุญุฉ ุงูุทุจุงุนุฉ:
   - IP address ุงูุทุงุจุนุฉ: `192.168.8.190` (IP ุงูุทุงุจุนุฉ)
   - IP address Print Proxy Server: `192.168.8.5` (IP ุงูููุจููุชุฑ)
   - Port: `9100`
   - ุงููุธุงู ุณูุญุงูู ุงูุงุชุตุงู ุจู Print Proxy Server ุนูู `http://192.168.8.5:3001/api/print` ุฃู `https://192.168.8.5:3443/api/print`

### 5. ูุชุญ Firewall ุนูู Mac (ููู ุฌุฏุงู!)

**โ๏ธ ูุฐู ุงูุฎุทูุฉ ุถุฑูุฑูุฉ ููุทุจุงุนุฉ ูู ุงูุฃุฌูุฒุฉ ุงูุฃุฎุฑู (iPadุ ุฃุฌูุฒุฉ ุฃุฎุฑู)**

ุฅุฐุง ูุงูุช ุงูุทุจุงุนุฉ ุชุนูู ูู ุฌูุงุฒ ุงูููุจููุชุฑ ููู ูุง ุชุนูู ูู iPad ุฃู ุฃุฌูุฒุฉ ุฃุฎุฑูุ ุงูุณุจุจ ุนูู ุงูุฃุฑุฌุญ ูู Firewall ุนูู Mac.

#### ุฎุทูุงุช ูุชุญ Firewall:

1. **ุงูุชุญ System Settings (ุฅุนุฏุงุฏุงุช ุงููุธุงู)**:
   - ุงุถุบุท ุนูู Apple menu (๐) โ System Settings
   - ุฃู ุงุจุญุซ ุนู "Firewall" ูู Spotlight

2. **ุงูุชุญ Firewall settings**:
   - ุงุฐูุจ ุฅูู **Network** โ **Firewall**
   - ุฃู ุงุจุญุซ ุนู "Firewall" ูู System Settings

3. **ุฅููุงู Firewall ูุคูุชุงู (ููุงุฎุชุจุงุฑ)**:
   - ุงุถุบุท ุนูู ุฒุฑ **Turn Off Firewall** (ุฅุฐุง ูุงู ููุนูู)
   - ุฃู ุงุถุบุท ุนูู **Options** โ **Block all incoming connections** (ุฃูุบู ุงูุชูุนูู)

4. **ุฃู ุฅุถุงูุฉ Node.js ุฅูู Firewall exceptions** (ุงูุทุฑููุฉ ุงูููุตู ุจูุง):
   - ุงุถุบุท ุนูู **Options** (ุฃู **Advanced**)
   - ุงุถุบุท ุนูู ุฒุฑ **+** ูุฅุถุงูุฉ ุชุทุจูู
   - ุงุจุญุซ ุนู **Node.js** ุฃู **node** ูู `/usr/local/bin/node` ุฃู ูุณุงุฑ `node` ูู ูุธุงูู
   - ุฃู ุฃุถู ุงูุชุทุจูู ุงูุฐู ูุดุบู Print Proxy Server
   - ุชุฃูุฏ ูู ุฃู **Allow incoming connections** ููุนูู ูู Node.js

5. **ุงูุณูุงุญ ุจุงูุงุชุตุงูุงุช ุนูู Ports**:
   - Firewall ุนูู Mac ุนุงุฏุฉ ูุณูุญ ุจุงูุงุชุตุงูุงุช ูู ุงูุชุทุจููุงุช ุงููุถุงูุฉ
   - ุฅุฐุง ูู ูุนููุ ููููู ุฅุถุงูุฉ ูุงุนุฏุฉ Firewall ูุฏููุงู:
     ```bash
     sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/local/bin/node
     sudo /usr/libexec/ApplicationFirewall/socketfilterfw --unblockapp /usr/local/bin/node
     ```

6. **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู**:
   - ุจุนุฏ ูุชุญ Firewallุ ุฌุฑูุจ ุงูุทุจุงุนุฉ ูู iPad
   - ุฅุฐุง ุนููุชุ ุงููุดููุฉ ูุงูุช Firewall โ
   - ุฅุฐุง ูู ุชุนููุ ุฑุงุฌุน ุงูุฎุทูุงุช ุงูุฃุฎุฑู

#### ููุงุญุธุงุช ูููุฉ:
- โ๏ธ ุฅููุงู Firewall ุชูุงูุงู ุบูุฑ ุขูู - ุงุณุชุฎุฏูู ููุท ููุงุฎุชุจุงุฑ
- โ ุงูุทุฑููุฉ ุงูููุตู ุจูุง: ุฅุถุงูุฉ Node.js ุฅูู Firewall exceptions
- โ ุจุนุฏ ุฅุถุงูุฉ Node.jsุ Firewall ุณูุณูุญ ุจุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ ุชููุงุฆูุงู

### 6. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

ุชุฃูุฏ ูู:
- โ Print Proxy Server ูุนูู ุนูู ุงูููุจููุชุฑ
- โ ุดูุงุฏุฉ SSL ููุฌูุฏุฉ ูู `certs/` (ููุทุจุงุนุฉ ูู HTTPS)
- โ iPad ูุงูููุจููุชุฑ ูุงูุทุงุจุนุฉ ุนูู ููุณ ุงูุดุจูุฉ WiFi
- โ **Firewall ูุณูุญ ุจุงูุงุชุตุงู ุนูู Ports 3001, 3002, 3443, 3444** โ๏ธ ููู ุฌุฏุงู!
- โ IP address ุงูููุจููุชุฑ ุตุญูุญ

### 6. ุงูุทุจุงุนุฉ ูู HTTPS (iPad)

ุนูุฏ ุงูุทุจุงุนุฉ ูู iPad ุนูู HTTPS:
1. ุงููุธุงู ุณูุญุงูู ุงูุงุชุตุงู ุจู WSS (Port 3444) ุฃููุงู
2. ุฅุฐุง ูุดูุ ุณูุญุงูู HTTPS (Port 3443)
3. ุฅุฐุง ูุดูุ ุณูุญุงูู WS (Port 3002) - ูุฏ ูุง ูุนูู ุจุณุจุจ Mixed Content
4. ุฅุฐุง ูุดูุ ุณูุญุงูู HTTP (Port 3001) - ูุฏ ูุง ูุนูู ุจุณุจุจ Mixed Content

**ูุฃูุถู ูุชุงุฆุฌ**: ุงุณุชุฎุฏู HTTPS/WSS (Ports 3443/3444) ูุน ุดูุงุฏุฉ SSL.

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "ูุง ูููู ุงูุงุชุตุงู ุจุฎุงุฏู ุงูุทุจุงุนุฉ" ูู ุงูุฃุฌูุฒุฉ ุงูุฃุฎุฑู

**ุงูุณุจุจ ุงูุฃูุซุฑ ุดููุนุงู**: Firewall ุนูู Mac ูููุน ุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ

**ุงูุญู**:
1. โ ุงูุชุญ System Settings โ Network โ Firewall
2. โ ุฃุถู Node.js ุฅูู Firewall exceptions
3. โ ุฃู ุฃููู Firewall ูุคูุชุงู ููุงุฎุชุจุงุฑ
4. โ ุฑุงุฌุน ูุณู "ูุชุญ Firewall ุนูู Mac" ุฃุนูุงู

**ุชุญูู ูู**:
- โ Print Proxy Server ูุนูู (ุฑุงุฌุน Terminal)
- โ IP address ุตุญูุญ ูู ุงูุฅุนุฏุงุฏุงุช
- โ ุฌููุน ุงูุฃุฌูุฒุฉ ุนูู ููุณ ุงูุดุจูุฉ WiFi

### ุฎุทุฃ: "Connection timeout"
- ุชุฃูุฏ ูู ุฃู Print Proxy Server ูุนูู
- ุชุฃูุฏ ูู ุฃู IP address ุตุญูุญ
- **ุชุฃูุฏ ูู ุฃู Firewall ูุณูุญ ุจุงูุงุชุตุงู** โ๏ธ
- ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฃุฌูุฒุฉ ุนูู ููุณ ุงูุดุจูุฉ

### ุฎุทุฃ: "Mixed Content"
- ูุฐุง ูุนูู ุฃู ุงูุตูุญุฉ ุนูู HTTPS ูุชุญุงูู ุงูุงุชุตุงู ุจู HTTP
- ุงูุญู: ุงุณุชุฎุฏู HTTPS/WSS (Ports 3443/3444) ุจุฏูุงู ูู HTTP/WS
- ุฃู ุงุณุชุฎุฏู Print Proxy Server ุนูู ููุณ ุงูุดุจูุฉ ุงููุญููุฉ

### ุฎุทุฃ: "Connection refused"
- ุชุฃูุฏ ูู ุฃู Print Proxy Server ูุนูู ุนูู Ports 3001, 3002, 3443, 3444
- **ุชุฃูุฏ ูู ุฃู Firewall ูุณูุญ ุจุงูุงุชุตุงู** โ๏ธ
- ุชุญูู ูู ุฃู ูุง ููุฌุฏ ุชุทุจูู ุขุฎุฑ ูุณุชุฎุฏู ููุณ ุงูููุงูุฐ

### ุฎุทุฃ: "ุงูุทุจุงุนุฉ ุชุนูู ูู ุฌูุงุฒู ููู ูุง ุชุนูู ูู iPad"
- **ุงูุณุจุจ**: Firewall ูููุน ุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ ูู ุงูุฃุฌูุฒุฉ ุงูุฃุฎุฑู
- **ุงูุญู**: ุงูุชุญ Firewall ูุฃุถู Node.js ุฅูู exceptions (ุฑุงุฌุน ูุณู "ูุชุญ Firewall ุนูู Mac" ุฃุนูุงู)

## ููุงุญุธุงุช

- **Print Proxy Server ุงููุฑูุฒู**: ูุฌุจ ุฃู ูุนูู ุทูุงู ุงูููุช ุนูู ุฌูุงุฒ ูุงุญุฏ (ูุซู Raspberry Pi ุฃู ููุจููุชุฑ ุฏุงุฆู)
- **ููุงุณุชุฎุฏุงู ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ**: ุงุญูุธ IP address Print Proxy Server ุงููุฑูุฒู ูู ุงูุฅุนุฏุงุฏุงุช (Settings) ููุชู ุงุณุชุฎุฏุงูู ูู ุฌููุน ุงูุฃุฌูุฒุฉ ุชููุงุฆูุงู
- **ุฅุนุฏุงุฏ ุชููุงุฆู**: ููููู ุฅุถุงูุฉ Print Proxy Server ูู service ููุนูู ุชููุงุฆูุงู ุนูุฏ ุจุฏุก ุงูุชุดุบูู
- **ููุฅูุชุงุฌ**: ููููู ุฑูุน Print Proxy Server ุนูู ุฎุงุฏู ูุญูู ุฃู ุงุณุชุฎุฏุงู Firebase Functions (ูุชุทูุจ Blaze plan)

## ุงูุทุจุงุนุฉ ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ

### ุงูุณููุงุฑูู:
- ุฌูุงุฒ 1: iPad (ุฌูุงุฒู ุงูุดุฎุตู)
- ุฌูุงุฒ 2: iPad ุขุฎุฑ ุฃู ุฌูุงุฒ ุขุฎุฑ
- Print Proxy Server: ูุนูู ุนูู ููุจููุชุฑ ูุฑูุฒู (ูุซุงู: `192.168.8.5`)

### ุงูุญู:
1. ุดุบูู Print Proxy Server ุนูู ุงูููุจููุชุฑ ุงููุฑูุฒู
2. ุงุญูุธ IP address (`192.168.8.5`) ูู ุงูุฅุนุฏุงุฏุงุช (Settings) ูู ุฃู ุฌูุงุฒ
3. ุงูุขู ุฌููุน ุงูุฃุฌูุฒุฉ ุณุชุณุชุฎุฏู Print Proxy Server ุงููุฑูุฒู ุชููุงุฆูุงู
4. ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู IP address ูู ูู ุฌูุงุฒ - ููุท ุฃุฏุฎู IP address ุงูุทุงุจุนุฉ

### ุงูููุงุฆุฏ:
- โ ุทุจุงุนุฉ ูู ุฃู ุฌูุงุฒ ุจุฏูู ุฅุนุฏุงุฏ ุฅุถุงูู
- โ ุฅุฏุงุฑุฉ ูุฑูุฒูุฉ - ุชุบููุฑ IP address ูู ููุงู ูุงุญุฏ
- โ ูุง ุญุงุฌุฉ ูู Print Proxy Server ุนูู ูู ุฌูุงุฒ

